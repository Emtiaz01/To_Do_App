<div class="task-details-container" *ngIf="task">
  <div class="task-card">
    <h2 class="task-title">Task Details</h2>

    <!-- View Mode -->
    <div class="task-info" *ngIf="!isEditing">
      <p><span>Name:</span> {{ task.taskName }}</p>
      <p><span>Description:</span> {{ task.taskDescription || 'No description' }}</p>
      <p><span>Submission Date:</span> {{ task.taskDate | date:'fullDate' }}</p>
      <p><span>Submission Time:</span> {{ task.taskTime || 'hh:mm' }}</p>
      <p>
        <span>Status:</span>
        <span [class.completed]="task.iscompleted" [class.pending]="!task.iscompleted">
          {{ task.iscompleted ? 'Completed' : 'Pending' }}
        </span>
      </p>
    </div>

    <!-- Edit Mode -->
    <div class="task-info" *ngIf="isEditing">
      <p>
        <span>Name:</span>
        <input [(ngModel)]="editTaskName" class="todo-input" required />
        <small *ngIf="!editTaskName?.trim()" class="error-text">Name is required</small>
      </p>
      <p>
        <span>Description:</span>
        <textarea [(ngModel)]="editTaskDescription" class="todo-input"></textarea>
      </p>
      <p>
        <span>Submission Date:</span>
        <input type="date" [(ngModel)]="task.taskDate" class="todo-input" required />
        <small *ngIf="!task.taskDate" class="error-text">Date is required</small>
      </p>
      <p>
        <span>Submission Time:</span>
        <input type="time" [(ngModel)]="task.taskTime" class="todo-input" required />
        <small *ngIf="!task.taskTime" class="error-text">Time is required</small>
      </p>
      <p>
        <span>Status:</span>
        <span [class.completed]="task.iscompleted" [class.pending]="!task.iscompleted">
          {{ task.iscompleted ? 'Completed' : 'Pending' }}
        </span>
      </p>
    </div>

    <!-- Actions -->
    <div class="task-actions">
      <!-- View Mode Buttons -->
      <ng-container *ngIf="!isEditing">
        <button (click)="goBack()">Back</button>
        <button (click)="toggleEdit()">Edit</button>
      </ng-container>

      <!-- Edit Mode Buttons -->
      <ng-container *ngIf="isEditing">
        <button 
          (click)="saveEdit()" 
          [disabled]="!editTaskName?.trim() || !task.taskDate || !task.taskTime">
          Save
        </button>
        <button (click)="toggleEdit()">Cancel</button>
      </ng-container>
    </div>
  </div>
</div>
